import {Notes, Appear, Image, Split, FullScreenCode} from 'mdx-deck'
import highlight from '@mdx-deck/themes/syntax-highlighter-prism'

import Repl from './repl'
import Reference from './Reference'
import References from './references'
import WithBackground from './WithBackground'
import * as snippets from './snippets'
import theme from './theme'

export const themes = [theme, highlight]

import mapAndCompass from './images/map-and-compass-people.jpeg'
import what from './images/what.gif'
import comeOn from './images/come-on.gif'
import crossRoadSign from './images/cross-road-sign.jpeg'
import toThePeople from './images/to-you-the-people.webp'
import cool from './images/cool.jpg'
import goal from './images/goal.jpeg'
import functionsEverywhere from './images/functions-everywhere.jpeg'
import functionsEverywhereHappy from './images/functions-everywhere-happy.jpg'
import pooh01 from './images/pooh-v2-01.jpg'
import pooh02 from './images/pooh-v2-02.jpg'
import pure from './images/pure.jpeg'
import xkcdRandom from './images/xkcd-random.png'
import wallet from './images/wallet.jpeg'
import gorillaThinking from './images/gorilla-thinking.jpg'
import factoryWorkerSaw from './images/factory-wroker-saw.jpeg'
import sideEffects from './images/side-effects.jpg'
import pooh03 from './images/pooh-v2-03.jpg'
import imgCurry from './images/curry.jpeg'
import wallStones from './images/wall-stones.jpeg'
import constructionWorkerPipe from './images/construction-worker-pipe.jpeg'
import fractal from './images/fractal.jpg'
import compositionIsFractal from './images/composition-fractal.png'
import compassAndForest from './images/compass-and-forest.jpeg'
import neverStopExploring from './images/never-stop-exploring.jpeg'
import onlyYou from './images/only-you.png'
import imgQuestions from './images/questions.gif'

# Functional Programming

# for the People

<small>

Christian Gill @ Catawiki

</small>

---

<Image src={mapAndCompass} />

---

## For the people?

---

A **monad** in X is just a **monoid**

in the category of **endofunctors** of X.

<Reference
  author="Saunders Mac Lane"
  href="https://www.springer.com/gp/book/9780387984032"
  reference="Categories for the Working Mathematician"
/>

---

<Image src={what} />

---

<Image src={comeOn} />

---

<Image src={crossRoadSign} />

---

<img src={toThePeople} width="840" />

---

## What does it mean

## to write functional code?

---

<Image src={cool} />

---

<Image src={goal} />

---

code terse, yet easy to reason about

<Reference
  href="https://github.com/MostlyAdequate/mostly-adequate-guide"
  reference="Professor Frisby's Mostly Adequate Guide to Functional Programming"
  author="Brian Lonsdorf"
/>

---

don't reinvent the wheel

<Reference
  href="https://github.com/MostlyAdequate/mostly-adequate-guide"
  reference="Professor Frisby's Mostly Adequate Guide to Functional Programming"
  author="Brian Lonsdorf"
/>

---

represent problems in terms of generic, composable bits

<Reference
  href="https://github.com/MostlyAdequate/mostly-adequate-guide"
  reference="Professor Frisby's Mostly Adequate Guide to Functional Programming"
  author="Brian Lonsdorf"
/>

---

<img
  alt="funtions, functions everywhere"
  src={functionsEverywhere}
  width="960"
/>

---

<img
  alt="funtions, functions everywhere"
  src={functionsEverywhereHappy}
  width="960"
/>

---

## First-class citizens

<Appear>

functions are values

</Appear>

---

```js
function add(a, b) {
  return a + b
}
const sum = (x, y) => add(x, y)
sum(1, 2) // 3
```

<Appear>

<div>

```js
const sum = add
sum(1, 2) // 3
```

</div>

</Appear>

---

```js
;[1, 2, 3].reduce((acc, i) => add(acc, i), 0)
```

<Appear>

<div>

```js
;[1, 2, 3].reduce(add, 0)
```

</div>

</Appear>

---

<img alt="first-class functions" src={pooh01} width="960" />

---

## Higher-Order Functions

---

```js
;[1, 2, 3].reduce(add, 0)
```

---

```js
const mult = (a) => (b) => a * b
const by2 = mult(2)

typeof by2 // 'function'
by2(2) // 4
mult(2)(2) // 4
```

---

<img
  alt="first-class higer-order functions"
  src={pooh02}
  width="840"
/>

---

<WithBackground src={pure} color="#2d2d2d">

## Pure functions

</WithBackground>

---

### same input -> same output

<Reference
  href="https://github.com/MostlyAdequate/mostly-adequate-guide"
  reference="Professor Frisby's Mostly Adequate Guide to Functional Programming"
  author="Brian Lonsdorf"
/>

---

<img src={xkcdRandom} width="1130" />

<Reference href="https://xkcd.com/221/" reference="xkcd" />

---

```js
Math.random() // 0.0814034364872233
Math.random() // 0.6760995607735527
```

---

```js
Date.now() // 1560981656763
Date.now() // 1562927443676
```

---

### no observable side effect

<Reference
  href="https://github.com/MostlyAdequate/mostly-adequate-guide"
  reference="Professor Frisby's Mostly Adequate Guide to Functional Programming"
  author="Brian Lonsdorf"
/>

---

<Image src={wallet} />

---

### splice vs. slice

---

<Image src={gorillaThinking} />

---

<Repl snippet={snippets.splice} persist />

---

<Repl snippet={snippets.slice} persist />

---

## Predictability

---

<WithBackground src={factoryWorkerSaw} color="white">

## What about I/O ?!

</WithBackground>

---

<img alt="side effects" src={sideEffects} width="840" />

---

## pure functions === easy tests

---

## same input -> same output

---

## no observable side effects

---

```js
const saveUser = (user) => Db.save(user)
```

<Appear>

<div>

```js
const makeSaveUser = (Db) => (user) => Db.save(user)
```

</div>

<div>

```js
const makeSaveUser = (Db) => Db.save
```

</div>

</Appear>

---

```js
const makeSaveUser = (Db) => Db.save
const db = connect(config)
// pure
const saveUser = makeSaveUser(db)
// impure
saveUser(user)
```

---

```js
const saveUser = (Db) => Db.save

// production
const db = connect(config)
const saveUser = makeSaveUser(db)
```

---

```js
const saveUser = (Db) => Db.save

// testing
const mockDB = createTestDB({users: []})
const saveUserTest = makeSaveUser(mockDB)
```

---

Cache

Parallel

Portable

Self-documenting

---

<Appear>

### React

</Appear>

`f(data) -> view`

<Reference
  author="Guillermo Rauch"
  reference="Pure UI"
  href="https://rauchg.com/2015/pure-ui"
/>

---

<Appear>

### Redux

</Appear>

`f(state, action) -> state`

<Reference
  author="Dan Abramov"
  reference="Live React: Hot Reloading with Time Travel"
  href="https://www.youtube.com/watch?v=xsSnOQynTHs"
/>

---

<img
  alt="first-class higher-order pure functions"
  src={pooh03}
  width="760"
/>

---

<Repl snippet={snippets.curryWanted} persist />

---

<WithBackground src={imgCurry} color="white">

## Currying & Partial Application

</WithBackground>

<Notes>
<b>Currying</b>: is the technique of translating the evaluation of a function
that takes multiple arguments into evaluating a sequence of functions, each with
a single argument.

<b>Partial Application</b>: the process of fixing a number of arguments to a
function, producing another function of smaller arity.

<b>Arity</b>: number of parameters a function accepts.

</Notes>

---

<Repl snippet={snippets.curry1} persist />

---

<WithBackground src={wallStones} color="black">

<Appear>

<h2 style={{ margin: 0, marginBottom: -20 }}>Composition</h2>

</Appear>

<h3 style={{ margin: 0, marginTop: -20 }}>(f ∘ g)(x) = f(g(x))</h3>

</WithBackground>

---

<Repl snippet={snippets.compose} persist />

---

<Image src={constructionWorkerPipe} />

---

<Repl snippet={snippets.compose3} persist />

---

<Repl snippet={snippets.composeN} persist />

---

<WithBackground src={fractal} color="white">

## Composition is Fractal

<Reference
  href="https://fsharpforfunandprofit.com/fppatterns/"
  reference="Functional Programming Design Patterns"
  author="Scott Wlaschin"
/>

</WithBackground>

---

`operation -> service -> use case -> app`

<img src={compositionIsFractal} />

<Reference
  href="https://fsharpforfunandprofit.com/fppatterns/"
  reference="Functional Programming Design Patterns"
  author="Scott Wlaschin"
/>

---

<WithBackground src={compassAndForest} color="white">

<div>

<h2 style={{ marginBottom: 0 }}>What does it mean</h2>

<h2 style={{ marginTop: 0 }}>to write functional code?</h2>

</div>

</WithBackground>

---

<Image src={neverStopExploring} />

---

<img src={onlyYou} width="840" />

---

<img src={imgQuestions} width="540" />

@<a href="https://twitter.com/gillchristian" target="_blank">gillchristian</a>

---

### References

<References />

---

# Thλnks!
